<div class="test-page">
  <header class="header">
    <div class="brand">
      <div class="brand__icon" aria-hidden="true">
        <svg viewBox="0 0 48 48" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M24 4C25.7818 14.2173 33.7827 22.2182 44 24C33.7827 25.7818 25.7818 33.7827 24 44C22.2182 33.7827 14.2173 25.7818 4 24C14.2173 22.2182 22.2182 14.2173 24 4Z"></path>
        </svg>
      </div>
      <h2 class="brand__name">ApprovalLayer</h2>
    </div>

    <div class="progress" aria-label="Onboarding progress">
      <span class="progress__label">Step 4 of 5</span>
      <div class="progress__dots" aria-hidden="true">
        <div class="dot dot--active"></div>
        <div class="dot dot--active"></div>
        <div class="dot dot--active"></div>
        <div class="dot dot--active"></div>
        <div class="dot"></div>
      </div>
    </div>

    <div class="header__actions">
      <button class="icon-button" type="button" aria-label="Help">
        <span class="material-symbols-outlined">help_outline</span>
      </button>
    </div>
  </header>

  <main class="main">
    <div class="heading">
      <h1>Test your workflow</h1>
      <p>Let's make sure everything is set up correctly before you go live.</p>
    </div>

    <div class="grid">
      <section class="left">
        <div class="card">
          <div class="card__header">
            <h3>Your setup summary</h3>
            <button class="link" type="button" (click)="editConfiguration()">Edit configuration</button>
          </div>

          <div class="summary">
            <div class="summary__item">
              <span class="summary__label">AI Engine</span>
              <div class="summary__value">
                <span class="material-symbols-outlined summary__ok">check_circle</span>
                <span>{{ systemName }}</span>
              </div>
            </div>

            <div class="summary__item">
              <span class="summary__label">Scope</span>
              <div class="summary__value">
                <span class="pill pill--risk">{{ riskScope }}</span>
              </div>
            </div>

            <div class="summary__item">
              <span class="summary__label">Governance</span>
              <div class="summary__value">
                <span class="material-symbols-outlined summary__icon">group</span>
                <span>2 approvers required</span>
              </div>
            </div>

            <div class="summary__item">
              <span class="summary__label">Integrations</span>
              <div class="summary__value">
                <span class="material-symbols-outlined summary__icon">notifications_active</span>
                <span>Slack notifications active</span>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="simulation">
            <label class="simulation__label" for="testPrompt">Run a simulation</label>
            <p class="simulation__hint">Provide a sample request to see how the AI handles the first layer of governance.</p>
            <textarea id="testPrompt" class="textarea" rows="5" [formControl]="testPrompt"></textarea>
            <div class="simulation__actions">
              <button class="secondary" type="button" (click)="sendTestRequest()">
                <span class="material-symbols-outlined">bolt</span>
                Send test request
              </button>
            </div>
          </div>
        </div>

        <div class="success" *ngIf="sent">
          <div class="success__icon">
            <span class="material-symbols-outlined">check</span>
          </div>
          <div>
            <h4>Test request sent successfully!</h4>
            <p>Notifications were sent to the 2 assigned approvers via Slack. They can now review the AI-generated summary.</p>
          </div>
        </div>
      </section>

      <aside class="right">
        <div class="next-card">
          <h3>What happens next</h3>
          <ol class="next-list">
            <li class="next-item">
              <span class="next-step">1</span>
              <div>
                <p class="next-title">AI analyzes request</p>
                <p class="next-text">Our system scans for risks and applies your pre-set policy rules automatically.</p>
              </div>
            </li>
            <li class="next-item">
              <span class="next-step">2</span>
              <div>
                <p class="next-title">Approvers notified</p>
                <p class="next-text">Smart alerts are sent to the relevant team members with decision context.</p>
              </div>
            </li>
            <li class="next-item">
              <span class="next-step">3</span>
              <div>
                <p class="next-title">Decision recorded</p>
                <p class="next-text">One-click approvals or rejections are captured with timestamped logs.</p>
              </div>
            </li>
            <li class="next-item">
              <span class="next-step">4</span>
              <div>
                <p class="next-title">Audit trail generated</p>
                <p class="next-text">Every step is documented for compliance and reporting requirements.</p>
              </div>
            </li>
          </ol>
        </div>
      </aside>
    </div>
  </main>

  <footer class="footer">
    <div class="footer__content">
      <button class="secondary" type="button" (click)="back()">Back</button>
      <button class="primary" type="button" (click)="continue()">Continue</button>
    </div>
  </footer>
</div>
