<nav [class.pb]="navExpanded" [class.squeeze]="!navExpanded" class="al-nav">
  <span (click)="toggleSidebar(!navExpanded)" [ngClass]="{ open: navExpanded }" class="toggle-icon">
    <span class="toggle-chev">‹</span>
  </span>

  <!-- Brand (Image-2) -->
  <div class="logo-container" routerLink="/">
    <span class="brand-badge" aria-hidden="true"></span>
    <h4>ApprovalLayer</h4>
  </div>

  <div class="navbar-menu-items" dir="auto">
    @for (item of sidebarItems; track item; let i = $index) {
      @if (shellService.allowedAccess(item)) {
        <div class="menu">
          @if (!item.divider) {
            <a (click)="activateSidebarItem(i)" [class.active]="item.active" [ngClass]="{ disabled: item.disabled }" class="menu-item" id="menu-item-{{ i }}">
              <div class="item">
                @if (item.icon) {
                  <!-- still placeholder i tag (no behavior change) -->
                  <i class="ico" aria-hidden="true">■</i>
                }
                <span>{{ item.title | translate }}</span>
              </div>

              @if (item.subItems && item.subItems.length) {
                <span [ngClass]="{ open: sidebarExtendedItem === i }" class="submenu-icon">
                  <i class="caret" aria-hidden="true">⌄</i>
                </span>
              }
            </a>

            @if (item.subItems && item.subItems.length) {
              <ul [style.display]="sidebarExtendedItem === i ? 'block' : 'none'" class="sub-menu-items">
                @for (subItem of item.subItems; track subItem) {
                  @if (shellService.allowedAccess(subItem)) {
                    <li [class.disabled]="subItem.disabled">
                      <a (click)="activateSidebarSubItem(i, subItem)" [ngClass]="{ disabled: subItem.disabled }" [routerLink]="subItem.href || undefined" routerLinkActive="active">
                        <i class="sub-ico" aria-hidden="true">•</i>
                        <span>{{ subItem.title | translate }}</span>
                      </a>
                    </li>
                  }
                }
              </ul>
            }
          } @else {
            <!-- Image-2 uses a label "SYSTEM" not a line -->
            <div class="section-label">{{ item.title | translate }}</div>
          }
        </div>
      }
    }
  </div>

  <!-- Footer (Image-2) -->
  <footer class="al-footer">
    <div class="user-card">
      <div class="user-avatar" aria-hidden="true"></div>
      <div class="user-meta">
        <div class="user-name">{{ userName }}</div>
        <div class="user-role">{{ userRole }}</div>
      </div>
    </div>
  </footer>
</nav>
